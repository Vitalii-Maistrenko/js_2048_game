var e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0,t=!1,n=document.querySelector(".start"),l=document.querySelector(".message-win"),o=document.querySelector(".message-start"),i=document.querySelector(".message-lose");function f(r){for(var t=0;t<e.length;t++)!function(t){var n=void 0;if("right"===r||"left"===r){var l=e[t].filter(function(e){return 0!==e}),o=e[t].filter(function(e){return 0===e});n="right"===r?o.concat(l):l.concat(o),e[t]=n}else if("down"===r||"up"===r){for(var i=[],f=0;f<e.length;f++)i.push(e[f][t]);var a=i.filter(function(e){return 0!==e}),c=i.filter(function(e){return 0===e});n="down"===r?c.concat(a):a.concat(c);for(var u=0;u<e.length;u++)e[u][t]=n[u]}}(t)}function a(t){for(var n=0;n<e.length;n++)!function(n){var l=[],o=Array(e.length).fill(!1);if("down"===t||"up"===t)for(var i=0;i<e.length;i++)l.push(e[i][n]);else("left"===t||"right"===t)&&(l=e[n].slice());var f=l.filter(function(e){return 0!==e}),a=l.filter(function(e){return 0===e});if("down"===t||"right"===t){for(var c=f.length-1;c>0;c--)f[c]!==f[c-1]||o[c]||(f[c]+=f[c-1],r+=f[c],f[c-1]=0,o[c]=!0);l=a.concat(f)}else if("up"===t||"left"===t){for(var u=0;u<f.length-1;u++)f[u]!==f[u+1]||o[u]||(f[u]+=f[u+1],r+=f[u],f[u+1]=0,o[u]=!0);l=f.concat(a)}if("down"===t||"up"===t)for(var d=0;d<e.length;d++)e[d][n]=l[d];else("left"===t||"right"===t)&&(e[n]=l.slice())}(n)}function c(r){for(var t=0;t<r;t++){for(var n=[],l=0;l<e.length;l++)for(var o=0;o<e[l].length;o++)0===e[l][o]&&n.push({row:l,tile:o});if(n.length>0){var i=Math.floor(Math.random()*n.length),f=n[i],a=f.row,c=f.tile,u=2*Math.random()>1.9?4:2;e[a][c]=u}}}function u(){var r=!0,n=!1,o=void 0;try{for(var i,f=e[Symbol.iterator]();!(r=(i=f.next()).done);r=!0){var a=i.value,c=!0,u=!1,d=void 0;try{for(var s,h=a[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){var v=s.value;2048===v&&(l.classList.remove("hidden"),t=!1)}}catch(e){u=!0,d=e}finally{try{c||null==h.return||h.return()}finally{if(u)throw d}}}}catch(e){n=!0,o=e}finally{try{r||null==f.return||f.return()}finally{if(n)throw o}}}function d(){for(var t=document.querySelector(".game-score"),n=0;n<e.length;n++)for(var l=0;l<e.length;l++){var o=document.querySelectorAll(".field-row")[n].querySelectorAll(".field-cell")[l];if(0===e[n][l]){o.textContent=" ";continue}o.textContent=e[n][l]}t.textContent=r,function(){for(var r=document.querySelectorAll(".field-row"),t={0:"",2:"field-cell--2",4:"field-cell--4",8:"field-cell--8",16:"field-cell--16",32:"field-cell--32",64:"field-cell--64",128:"field-cell--128",256:"field-cell--256",512:"field-cell--512",1024:"field-cell--1024",2048:"field-cell--2048"},n=0;n<e.length;n++)for(var l=r[n].querySelectorAll(".field-cell"),o=0;o<e[n].length;o++){var i=e[n][o];l[o].className="field-cell "+t[i]}}()}function s(){if(e.some(function(e){return e.includes(0)}))return!1;for(var r=0;r<e.length;r++)for(var t=0;t<e.length-1;t++)if(e[r][t]===e[r][t+1])return!1;for(var n=0;n<e.length;n++)for(var l=0;l<e.length-1;l++)if(e[l][n]===e[l+1][n])return!1;return!0}n.addEventListener("click",function(){"Start"===n.innerText?(n.innerText="Restart",n.classList.replace("start","restart"),o.classList.add("hidden")):(e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0,i.classList.add("hidden"),l.classList.add("hidden")),c(2),t=!0,d()}),document.addEventListener("keydown",function(r){if(t){var n,l=JSON.parse(JSON.stringify(e)),o=!1;switch(r.key){case"ArrowRight":!1===s()&&(a("right"),f("right"),u(),o=!0);break;case"ArrowLeft":!1===s()&&(a("left"),f("left"),u(),o=!0);break;case"ArrowDown":!1===s()&&(a("down"),f("down"),u(),o=!0);break;case"ArrowUp":!1===s()&&(a("up"),f("up"),u(),o=!0)}o&&(n=e,JSON.stringify(l)!==JSON.stringify(n))&&(c(1),s()&&(t=!1,i.classList.remove("hidden")),d())}});
//# sourceMappingURL=index.49ab7a26.js.map
